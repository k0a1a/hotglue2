$(document).ready(function(){var a=function(d,c){var d=$(d).get(0);var e=d.selectionStart;var b=d.selectionEnd;d.value=d.value.substring(0,e)+c+d.value.substring(b,d.value.length);d.selectionStart=e+c.length;d.selectionEnd=e+c.length};if($("#user_body_text").val().length){$("#user_code_text").focus()}$("#user_body_text").bind("keydown",function(b){if(b.which==9){a($(this),String.fromCharCode(9));b.preventDefault();return false}});$("#user_code_save").bind("click",function(c){$(this).attr("disabled","disabled");$(this).attr("value","saving..");var b=this;$.glue.backend({method:"user_code.set_code",page:$.glue.page,head:$("#user_head_text").val(),body:$("#user_body_text").val()},function(d){$(b).removeAttr("disabled");$(b).attr("value","saved");setTimeout(function(){$(b).attr("value","save")},2000);if($.glue.page&&$("#user_code_page_link").length==0){$("body").append($('<a id="user_code_page_link" href="'+$.glue.base_url+"?"+$.glue.page+'/edit">go to page</a>'))}})})});