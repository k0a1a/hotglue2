$(document).ready(function(){var a;a=$('<img src="'+$.glue.base_url+'modules/object/object-clone.png" alt="btn" title="clone object" width="32" height="32">');$(a).bind("click",function(c){var b=$(this).data("owner");$.glue.backend({method:"glue.clone_object",name:$(b).attr("id")},function(d){$.glue.sel.none();var e=$(b).clone();$(e).attr("id",d);$(e).css("left",($(b).position().left+$.glue.grid.x())+"px");$(e).css("top",($(b).position().top+$.glue.grid.y())+"px");$("body").append(e);$(e).trigger("glue-pre-clone");$.glue.object.register(e);$.glue.sel.select(e);$.glue.object.save(e)})});$.glue.contextmenu.register("object","object-clone",a,1);a=$('<img src="'+$.glue.base_url+'modules/object/object-transparency.png" alt="btn" title="change transparency" width="32" height="32">');$(a).bind("glue-menu-activate",function(f){var d=$(this).data("owner");var b=parseFloat($(d).css("opacity"))*100;var c="change transparency ("+b.toFixed(0)+"%)";$(this).attr("title",c)});$(a).bind("mousedown",function(d){var b=this;var c=$(this).data("owner");$.glue.slider(d,function(e,f){if(e<-15){e=1-(Math.abs(e)-15)/300}else{if(e<15){e=1}else{e=1-(Math.abs(e)-15)/300}}if(e<0){e=0}$(c).css("opacity",e)},function(e,f){$.glue.object.save(c);$(b).trigger("glue-menu-activate")});return false});$.glue.contextmenu.register("object","object-transparency",a,2);a=$('<img src="'+$.glue.base_url+'modules/object/object-zindex.png" alt="btn" title="bring object to foreground or background" width="32" height="32">');$(a).bind("mousedown",function(c){var b=$(this).data("owner");var d=parseInt($(b).css("z-index"));$.glue.slider(c,function(e,g){if(e<-15){$.glue.stack.to_bottom($(b))}else{if(e<15){var f=parseInt($(b).css("z-index"));if(f!==d){if(!isNaN(d)){$(b).css("z-index",d)}else{$(b).css("z-index","")}}}else{$.glue.stack.to_top($(b))}}},function(e,f){$.glue.object.save(b);$.glue.stack.compress()});return false});$.glue.contextmenu.register("object","object-zindex",a,3);a=$('<img src="'+$.glue.base_url+'modules/object/object-link.png" alt="btn" title="make the object a link" width="32" height="32">');$(a).bind("click",function(c){var b=$(this).data("owner");$.glue.backend({method:"glue.load_object",name:$(b).attr("id")},function(g){if(g["#error"]){$.glue.error(g["#error"])}else{var f="";if(g["#data"]["object-link"]!==undefined){f=g["#data"]["object-link"]}var d="";if(g["#data"]["object-target"]!==undefined){d=g["#data"]["object-target"]}old_linkdata=(d=="")?f:f+" "+d;var e=prompt("Enter link (e.g. http://hotglue.me or pagename or anchor name).\nTo add target specify its name after a space (e.g. http://hotglue.me _blank)",old_linkdata);if(e===null||e==f+" "+d){return}t=e.split(" ");link=t[0];target=t[1];if(link==undefined){$.glue.backend({method:"glue.object_remove_attr",name:$(b).attr("id"),attr:"object-link"})}else{$.glue.backend({method:"glue.update_object",name:$(b).attr("id"),"object-link":link});if(target!==undefined){$.glue.backend({method:"glue.update_object",name:$(b).attr("id"),"object-target":target})}}if(d!==""&&(target==""||target==undefined)){$.glue.backend({method:"glue.object_remove_attr",name:$(b).attr("id"),attr:"object-target"})}}},false)});$.glue.contextmenu.register("object","object-link",a);a=$('<img src="'+$.glue.base_url+'modules/object/object-target.png" alt="btn" title="get the name of this object (for linking to it)" width="32" height="32">');$(a).bind("click",function(d){var c=$(this).data("owner");var b=$(c).attr("id").split(".").pop();prompt("You can link to this object by copying and pasting this string",$.glue.page+"."+b)});$.glue.contextmenu.register("object","object-target",a);a=$('<img src="'+$.glue.base_url+'modules/object/object-symlink.png" alt="btn" title="make this object appear on all pages" width="32" height="32">');$(a).bind("click",function(c){var b=$(this).data("owner");$.glue.backend({method:"glue.object_make_symlink",name:$(b).attr("id")})});$.glue.contextmenu.register("object","object-symlink",a);a=$('<img src="'+$.glue.base_url+'modules/object/object-delete.png" alt="btn" title="delete object" width="32" height="32">');$(a).bind("click",function(c){var b=$(this).data("owner");var d=$(b).attr("id");$.glue.object.unregister($(b));$(b).remove();$.glue.backend({method:"glue.delete_object",name:d});$.glue.canvas.update()});$.glue.contextmenu.register("object","object-delete",a,20)});